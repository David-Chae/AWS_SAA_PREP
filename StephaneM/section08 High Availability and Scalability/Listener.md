# 한 줄 요약

**리스너(Listener)**는 ELB(로드밸런서)에서 **클라이언트의 연결을 받아들이는 ‘문’**이에요.
문 앞에 어떤 문(포트)인지, 어떤 언어(프로토콜)로 얘기할지, 문을 열면 누구(타깃 그룹)에게 보낼지 정해놓은 규칙이 바로 리스너입니다.

---

## 비유로 이해하기

* 로드밸런서 = 회사 건물
* 리스너 = 건물 입구의 문(예: 정문, 후문)
* 포트 = 문의 번호(예: 80번 문, 443번 문)
* 프로토콜 = 손님이 사용하는 언어(HTTP, HTTPS, TCP 등)
* 타깃 그룹 = 건물 안에서 손님을 안내할 부서(서버 그룹)

즉, 리스너는 **"누가(포트/프로토콜) 들어오면, 어디로 안내할지(타깃 그룹/규칙)"**를 담당합니다.

---

## 주요 개념 (쉽게)

1. **포트(Port)**

   * 외부에서 접속하는 번호. 예: 80(HTTP), 443(HTTPS), 22(SSH) 등.
2. **프로토콜(Protocol)**

   * 통신 규칙. HTTP/HTTPS/TCP/UDP 등.
3. **액션(Action)**

   * 리스너가 받은 트래픽을 **어디로 보낼지**(타깃 그룹), 또는 **리다이렉트/고정 응답** 같은 동작을 정의.
4. **리스너 규칙(Listener rules)** — (주로 ALB에서)

   * 요청 경로나 호스트 헤더에 따라 다른 타깃으로 보낼 수 있어요. 예: `example.com/images/*` → 이미지 서버 그룹.
5. **TLS 종료(TLS termination)**

   * HTTPS를 처리할 때 리스너가 인증서(SSL/TLS)를 설치해 암호화 연결을 풀어(종료) 내부는 평문(HTTP)으로 보낼 수도 있어요.

---

## ALB vs NLB(리스너 관점에서 차이)

* **ALB (Application Load Balancer)**

  * 리스너는 주로 HTTP/HTTPS, **호스트/경로 기반 규칙**을 사용해 요청을 여러 타깃으로 분기함. (웹 앱에 최적)
* **NLB (Network Load Balancer)**

  * TCP/UDP 등 **L4 수준**에서 초저지연 대량 연결을 처리. 단순히 포트로 전달(원격 포트 유지). (게임, IoT, 고성능 서비스에 적합)

---

## 예시 — 실무에서 흔한 설정

1. **웹사이트(A)**

   * 리스너: 포트 80, 프로토콜 HTTP → 액션: 리다이렉트(포트 443)
   * 리스너: 포트 443, 프로토콜 HTTPS → 액션: 타깃 그룹(웹 서버들)
2. **API / 정적 파일 분리**

   * ALB 리스너(443) 규칙:

     * `/api/*` → 타깃그룹-API
     * `/static/*` → 타깃그룹-CDN-캐시 (또는 S3 앞 단)
3. **TCP 서비스 (예: DB 프록시)**

   * NLB 리스너: 포트 3306, 프로토콜 TCP → 액션: 타깃그룹(DB 프록시들)

---

## 빠른 체크리스트 (문제 발생 시)

* 클라이언트가 올바른 **포트/프로토콜**로 접속하는가?
* HTTPS라면 **인증서**가 리스너에 제대로 붙어있는가?
* 리스너의 **액션(타깃 그룹)**이 올바른 인스턴스 / 포트로 지정되어 있는가?
* ALB 규칙 우선순위가 의도대로 되어 있는가? (더 구체적인 규칙이 우선)
* 보안그룹/네트워크 ACL이 리스너 포트를 허용하는가?
