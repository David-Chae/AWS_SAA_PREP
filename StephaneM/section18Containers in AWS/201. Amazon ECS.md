
# ğŸŸ¦ Amazon ECSë€?

**ECS = Elastic Container Service**
AWSì—ì„œ **Docker ì»¨í…Œì´ë„ˆë¥¼ í¸í•˜ê²Œ ê´€ë¦¬í•˜ê³  ì‹¤í–‰**í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì•¼.

* ECSì—ì„œ **ì»¨í…Œì´ë„ˆ í•œ ê°œ ì‹¤í–‰ = ECS Task**
* ì—¬ëŸ¬ Taskë¥¼ ëª¨ì•„ ë†“ì€ ê²ƒì´ **ECS Cluster**
* í´ëŸ¬ìŠ¤í„° ì•ˆì—ì„œ Taskë“¤ì´ ëŒì•„ê°€ë©° ì•±ì„ ì œê³µ

---

# ğŸŸ© ECSì˜ ë‘ ê°€ì§€ ì‹¤í–‰ ë°©ì‹(Launch Type)

## 1) **EC2 Launch Type**

* ì§ì ‘ **EC2 ì„œë²„ë¥¼ ì¤€ë¹„**í•˜ê³  ê´€ë¦¬í•´ì•¼ í•¨
* ì„œë²„ì—ëŠ” **ECS Agent**ê°€ ì„¤ì¹˜ë˜ì–´ ìˆìŒ â†’ í´ëŸ¬ìŠ¤í„°ì™€ í†µì‹ 
* ì»¨í…Œì´ë„ˆ(Task)ë¥¼ ì‹¤í–‰í•˜ë©´ ECSê°€ **ìë™ìœ¼ë¡œ ì–´ëŠ EC2ì— ì˜¬ë¦´ì§€ ë°°ì¹˜**í•¨
* ì¥ì : ì„œë²„ ì™„ì „ ì œì–´ ê°€ëŠ¥
* ë‹¨ì : ì„œë²„ ê´€ë¦¬ í•„ìš” â†’ ë²ˆê±°ë¡­ê³  í™•ì¥ ì–´ë ¤ì›€

## 2) **Fargate Launch Type**

* ì„œë²„ ê´€ë¦¬ **ì™„ì „íˆ í•„ìš” ì—†ìŒ â†’ ì„œë²„ë¦¬ìŠ¤**
* Task ì •ì˜(Task Definition)ë§Œ ë§Œë“¤ê³ , CPU/RAM ìš”êµ¬ì‚¬í•­ë§Œ ì§€ì •
* ì»¨í…Œì´ë„ˆê°€ **ì–´ë”” ì„œë²„ì—ì„œ ëŒì•„ê°€ëŠ”ì§€ ì‹ ê²½ ì•ˆ ì¨ë„ ë¨**
* ì¥ì : ê´€ë¦¬ ê°„í¸, ìë™ í™•ì¥ ê°€ëŠ¥, ì„œë²„ ì‹ ê²½ X
* ë‹¨ì : ë¹„ìš©ì´ ì¡°ê¸ˆ ë” ë‚˜ì˜¬ ìˆ˜ ìˆìŒ

ğŸ‘‰ ì‰½ê²Œ ê¸°ì–µ:
EC2 = ì§ì ‘ ì„œë²„ ì˜¬ë¦¬ê³  Task ë°°ì¹˜
Fargate = ì„œë²„ëŠ” AWSê°€ ì•Œì•„ì„œ, ê·¸ëƒ¥ ì»¨í…Œì´ë„ˆë§Œ ì˜¬ë¦¼

---

# ğŸŸ§ IAM ì—­í• (Role) ê´€ë¦¬

ECSì—ì„œëŠ” **ê¶Œí•œì„ ë‘ ê°€ì§€ë¡œ êµ¬ë¶„**:

1. **EC2 Instance Profile Role**

   * EC2 ì„œë²„(ECS Agent)ê°€ AWS ì„œë¹„ìŠ¤ í˜¸ì¶œ ê°€ëŠ¥í•˜ê²Œ í•´ì¤Œ
   * ì˜ˆ: CloudWatch Logs â†’ ì»¨í…Œì´ë„ˆ ë¡œê·¸ ì €ì¥, ECR â†’ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°

2. **ECS Task Role**

   * ê° Taskë§ˆë‹¤ í•„ìš”í•œ ê¶Œí•œ ì§€ì •
   * ì˜ˆ: Task A â†’ S3 ì ‘ê·¼, Task B â†’ DynamoDB ì ‘ê·¼
   * EC2 Launch/Fargate ëª¨ë‘ ì ìš© ê°€ëŠ¥

ğŸ‘‰ êµ¬ë¶„ í¬ì¸íŠ¸:

* **Agent** ê¶Œí•œ â†’ ì„œë²„ê°€ AWSì™€ í†µì‹ 
* **Task** ê¶Œí•œ â†’ ì»¨í…Œì´ë„ˆê°€ AWSì™€ í†µì‹ 

---

# ğŸŸª Load Balancerì™€ ECS

* ì—¬ëŸ¬ Taskë¥¼ ë™ì‹œì— ì‹¤í–‰í•˜ë©´ **ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ë ¤ë©´ Load Balancer í•„ìš”**
* **Application Load Balancer(ALB)**: ì¼ë°˜ì ì¸ ì›¹/HTTP ì„œë¹„ìŠ¤ì— ì í•©
* **Network Load Balancer(NLB)**: ì´ˆê³ ì†/ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ìš©
* **Classic LB**: êµ¬ì‹, Fargateì™€ í˜¸í™˜ ì•ˆ ë¨ â†’ ì‚¬ìš© ë¹„ì¶”ì²œ

---

# ğŸŸ¨ ë°ì´í„° ì €ì¥(Persistence)

* ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ë°ì´í„°ë¥¼ ê³„ì† ì €ì¥í•˜ì§€ ëª»í•¨**
* **Amazon EFS**ë¥¼ ì—°ê²°í•˜ë©´:

  * EC2/Fargate ì–´ë””ì—ì„œ ì‹¤í–‰ë˜ë“  **ê°™ì€ íŒŒì¼ ì‹œìŠ¤í…œ ê³µìœ  ê°€ëŠ¥**
  * ë‹¤ì¤‘ AZì—ì„œë„ ë°ì´í„° ë™ê¸°í™” ê°€ëŠ¥
  * ì„œë²„ë¦¬ìŠ¤ + ì‚¬ìš©í•œ ë§Œí¼ë§Œ ìš”ê¸ˆ â†’ ê´€ë¦¬ ê°„í¸

ğŸ‘‰ ê°€ì¥ ì¶”ì²œ ì¡°í•©: **Fargate + EFS**
â†’ ì„œë²„ ì‹ ê²½ X, ë°ì´í„° ê³µìœ  O

---

# ğŸ“Œ ECS í•µì‹¬ ìš”ì•½

| í•­ëª©      | EC2 Launch Type               | Fargate Launch Type |
| ------- | ----------------------------- | ------------------- |
| ì„œë²„ ê´€ë¦¬   | ì§ì ‘ ê´€ë¦¬                         | AWSê°€ ê´€ë¦¬ (ì„œë²„ë¦¬ìŠ¤)      |
| ì»¨í…Œì´ë„ˆ ë°°ì¹˜ | ECSê°€ EC2 ìœ„ì— ìë™ ë°°ì¹˜             | ì–´ë””ì„œ ëŒì•„ê°€ëŠ”ì§€ ì‹ ê²½ X      |
| ê¶Œí•œ ê´€ë¦¬   | EC2 Instance Role + Task Role | Task Roleë§Œ ê´€ë¦¬       |
| í™•ì¥      | ì„œë²„ ì¦ì„¤ í•„ìš”                      | Task ìˆ˜ë§Œ ëŠ˜ë¦¬ë©´ ë¨       |
| ë°ì´í„° ê³µìœ   | EFS ì—°ê²° ê°€ëŠ¥                     | EFS ì—°ê²° ê°€ëŠ¥           |
| ì¥ì       | ì„œë²„ ì™„ì „ ì œì–´                      | ê´€ë¦¬ ê°„í¸, ì„œë²„ ì‹ ê²½ X      |
| ë‹¨ì       | ì„œë²„ ê´€ë¦¬ ë²ˆê±°ë¡œì›€                    | ë¹„ìš© ì•½ê°„ ë” ë†’ì„ ìˆ˜ ìˆìŒ     |

---

# Amazon ECS
# ì•„ë§ˆì¡´ ECS

## Introduction to Amazon ECS
## Amazon ECS ì†Œê°œ

Amazon ECS stands for Elastic Container Service.  
Amazon ECSëŠ” Elastic Container Service(íƒ„ë ¥ì  ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤)ì˜ ì•½ìì…ë‹ˆë‹¤.  

When launching Docker containers on AWS, you are launching what is called an ECS Task on an ECS Cluster.  
AWSì—ì„œ Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ, ì´ëŠ” ECS í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ECS íƒœìŠ¤í¬(Task)ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  

An ECS Cluster is composed of multiple components depending on the launch type used.  
ECS í´ëŸ¬ìŠ¤í„°ëŠ” ì‚¬ìš©í•˜ëŠ” ì‹¤í–‰ ìœ í˜•(ëŸ°ì¹˜ íƒ€ì…)ì— ë”°ë¼ ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.  

---

## EC2 Launch Type
## EC2 ì‹¤í–‰ ìœ í˜•

With the EC2 Launch Type, the ECS Cluster is composed of EC2 instances.  
EC2 ì‹¤í–‰ ìœ í˜•ì—ì„œëŠ” ECS í´ëŸ¬ìŠ¤í„°ê°€ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.  

In this case, you must provision and maintain the infrastructure yourself.  
ì´ ê²½ìš°, ì¸í”„ë¼ë¥¼ ì§ì ‘ í”„ë¡œë¹„ì €ë‹í•˜ê³  ìœ ì§€ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.  

Each EC2 instance runs the ECS Agent, which registers the instance into the Amazon ECS service and the specified ECS Cluster.  
ê° EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ECS ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©°, ì´ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ê°€ Amazon ECS ì„œë¹„ìŠ¤ ë° ì§€ì •ëœ ECS í´ëŸ¬ìŠ¤í„°ì— ë“±ë¡ë©ë‹ˆë‹¤.  

Once this setup is in place, starting or stopping ECS tasks results in AWS managing the placement of Docker containers on the EC2 instances automatically.  
ì´ ì„¤ì •ì´ ì™„ë£Œë˜ë©´, ECS íƒœìŠ¤í¬ë¥¼ ì‹œì‘í•˜ê±°ë‚˜ ì¤‘ì§€í•  ë•Œ AWSê°€ ìë™ìœ¼ë¡œ Docker ì»¨í…Œì´ë„ˆë¥¼ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë°°ì¹˜í•©ë‹ˆë‹¤.  

Docker containers are placed on Amazon EC2 instances that you provision in advance.  
Docker ì»¨í…Œì´ë„ˆëŠ” ì‚¬ìš©ìê°€ ë¯¸ë¦¬ í”„ë¡œë¹„ì €ë‹í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë°°ì¹˜ë©ë‹ˆë‹¤.  

---

## Fargate Launch Type
## Fargate ì‹¤í–‰ ìœ í˜•

The Fargate Launch Type also runs Docker containers on AWS, but you do not provision the infrastructure.  
Fargate ì‹¤í–‰ ìœ í˜• ë˜í•œ AWSì—ì„œ Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì§€ë§Œ, ì¸í”„ë¼ë¥¼ ì§ì ‘ í”„ë¡œë¹„ì €ë‹í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.  

There are no EC2 instances to manage; it is serverless.  
EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ìœ¼ë©°, ì„œë²„ë¦¬ìŠ¤ ë°©ì‹ì…ë‹ˆë‹¤.  

Although servers exist behind the scenes, you do not manage them.  
ë¬¼ë¡  ë‚´ë¶€ì ìœ¼ë¡œ ì„œë²„ê°€ ì¡´ì¬í•˜ì§€ë§Œ, ì‚¬ìš©ìê°€ ì´ë¥¼ ê´€ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  

In this type, you create task definitions to define ECS tasks, and AWS runs these tasks based on the CPU and RAM requirements you specify.  
ì´ ë°©ì‹ì—ì„œëŠ” íƒœìŠ¤í¬ ì •ì˜(Task Definition)ë¥¼ ì‘ì„±í•˜ì—¬ ECS íƒœìŠ¤í¬ë¥¼ ì •ì˜í•˜ë©°, AWSê°€ ì§€ì •ëœ CPUì™€ RAM ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.  

When running a new Docker container, it is launched without you knowing where it runs and without any EC2 instance being created in your account.  
ìƒˆ Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ, ì–´ë””ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ ì•Œ í•„ìš”ë„ ì—†ìœ¼ë©° ê³„ì • ë‚´ì— EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì§€ë„ ì•ŠìŠµë‹ˆë‹¤.  

To scale, you simply increase the number of tasks without managing EC2 instances.  
í™•ì¥ì´ í•„ìš”í•˜ë‹¤ë©´ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ íƒœìŠ¤í¬ ê°œìˆ˜ë§Œ ëŠ˜ë¦¬ë©´ ë©ë‹ˆë‹¤.  

Fargate is preferred for its serverless nature and ease of management compared to the EC2 Launch Type.  
FargateëŠ” ì„œë²„ë¦¬ìŠ¤ íŠ¹ì„±ê³¼ ê´€ë¦¬ì˜ í¸ì˜ì„± ë•ë¶„ì— EC2 ì‹¤í–‰ ìœ í˜•ë³´ë‹¤ ì„ í˜¸ë©ë‹ˆë‹¤.  

---

## IAM Roles for ECS Tasks
## ECS íƒœìŠ¤í¬ë¥¼ ìœ„í•œ IAM ì—­í• 

### EC2 Launch Type
### EC2 ì‹¤í–‰ ìœ í˜•

In the EC2 Launch Type, the EC2 instances running the ECS Agent use an EC2 Instance Profile.  
EC2 ì‹¤í–‰ ìœ í˜•ì—ì„œëŠ” ECS ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  

This profile allows the ECS Agent to make API calls to the ECS service, CloudWatch Logs for sending container logs, ECR for pulling Docker images, and to reference sensitive data in Secrets Manager or the SSM Parameter Store.  
ì´ í”„ë¡œíŒŒì¼ì€ ECS ì—ì´ì „íŠ¸ê°€ ECS ì„œë¹„ìŠ¤ì— API í˜¸ì¶œì„ í•˜ê±°ë‚˜, CloudWatch Logsë¡œ ë¡œê·¸ë¥¼ ì „ì†¡í•˜ê±°ë‚˜, ECRì—ì„œ Docker ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜, Secrets Manager ë˜ëŠ” SSM íŒŒë¼ë¯¸í„° ìŠ¤í† ì–´ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤.  

---

### ECS Task Roles
### ECS íƒœìŠ¤í¬ ì—­í• 

ECS tasks themselves receive ECS Task Roles, which are applicable to both EC2 Launch Type and Fargate.  
ECS íƒœìŠ¤í¬ëŠ” ìì²´ì ìœ¼ë¡œ ECS íƒœìŠ¤í¬ ì—­í• (Task Role)ì„ ë°›ìœ¼ë©°, ì´ëŠ” EC2 ì‹¤í–‰ ìœ í˜•ê³¼ Fargate ëª¨ë‘ì— ì ìš©ë©ë‹ˆë‹¤.  

You can create specific roles per task.  
íƒœìŠ¤í¬ë§ˆë‹¤ íŠ¹ì • ì—­í• ì„ ë”°ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

For example, Task A may have an ECS Task A Role allowing API calls against Amazon S3, while Task B may have a Task B Role allowing API calls against DynamoDB.  
ì˜ˆë¥¼ ë“¤ì–´, íƒœìŠ¤í¬ AëŠ” Amazon S3ì— API í˜¸ì¶œì„ í—ˆìš©í•˜ëŠ” ì—­í• ì„, íƒœìŠ¤í¬ BëŠ” DynamoDBì— API í˜¸ì¶œì„ í—ˆìš©í•˜ëŠ” ì—­í• ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

The Task Role is defined in the task definition of your ECS service.  
íƒœìŠ¤í¬ ì—­í• ì€ ECS ì„œë¹„ìŠ¤ì˜ íƒœìŠ¤í¬ ì •ì˜ì—ì„œ ì •ì˜ë©ë‹ˆë‹¤.  

It is important to distinguish between the EC2 Instance Profile Role used by ECS Agents and the ECS Task Role used by ECS tasks.  
ECS ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ì—­í• ê³¼ ECS íƒœìŠ¤í¬ê°€ ì‚¬ìš©í•˜ëŠ” íƒœìŠ¤í¬ ì—­í• ì„ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  

---

## Load Balancer Integrations
## ë¡œë“œ ë°¸ëŸ°ì„œ í†µí•©

Whether using the EC2 Launch Type or Fargate, you can run multiple ECS tasks within an ECS Cluster and expose these tasks as HTTP or HTTPS endpoints.  
EC2 ì‹¤í–‰ ìœ í˜•ì´ë“  Fargateë“ , í•˜ë‚˜ì˜ ECS í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ì—¬ëŸ¬ ECS íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•˜ê³  ì´ë¥¼ HTTP/HTTPS ì—”ë“œí¬ì¸íŠ¸ë¡œ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

An Application Load Balancer (ALB) can be placed in front of the ECS tasks, routing user traffic to the tasks directly.  
Application Load Balancer(ALB)ë¥¼ ECS íƒœìŠ¤í¬ ì•ì— ë‘ì–´ ì‚¬ìš©ì íŠ¸ë˜í”½ì„ íƒœìŠ¤í¬ë¡œ ì§ì ‘ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

The ALB supports most use cases and is a good choice.  
ALBëŠ” ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš© ì‚¬ë¡€ë¥¼ ì§€ì›í•˜ë©° ì¢‹ì€ ì„ íƒì…ë‹ˆë‹¤.  

A Network Load Balancer (NLB) is recommended only for very high throughput or high performance use cases, or when used with AWS PrivateLink.  
Network Load Balancer(NLB)ëŠ” ë§¤ìš° ë†’ì€ ì²˜ë¦¬ëŸ‰ì´ë‚˜ ì„±ëŠ¥ì´ í•„ìš”í•œ ê²½ìš°, ë˜ëŠ” AWS PrivateLinkì™€ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ê¶Œì¥ë©ë‹ˆë‹¤.  

The older Classic Load Balancer can be used but is not recommended because it lacks advanced features and cannot be linked to Fargate.  
êµ¬í˜• Classic Load Balancerë„ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë‚˜, ê³ ê¸‰ ê¸°ëŠ¥ì´ ë¶€ì¡±í•˜ê³  Fargateì™€ ì—°ë™ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  

The Application Load Balancer works with both EC2 and Fargate launch types.  
Application Load BalancerëŠ” EC2ì™€ Fargate ì‹¤í–‰ ìœ í˜• ëª¨ë‘ì™€ í˜¸í™˜ë©ë‹ˆë‹¤.  

---

## Data Persistence on Amazon ECS
## Amazon ECSì—ì„œì˜ ë°ì´í„° ì§€ì†ì„±

To achieve data persistence on Amazon ECS, you need data volumes.  
Amazon ECSì—ì„œ ë°ì´í„° ì§€ì†ì„±ì„ í™•ë³´í•˜ë ¤ë©´ ë°ì´í„° ë³¼ë¥¨ì´ í•„ìš”í•©ë‹ˆë‹¤.  

One notable option is Amazon Elastic File System (EFS).  
ëŒ€í‘œì ì¸ ì˜µì…˜ì€ Amazon Elastic File System(EFS)ì…ë‹ˆë‹¤.  

Both EC2 instances and Fargate launch types can mount an Amazon EFS file system onto ECS tasks.  
EC2 ì¸ìŠ¤í„´ìŠ¤ì™€ Fargate ì‹¤í–‰ ìœ í˜• ëª¨ë‘ ECS íƒœìŠ¤í¬ì— Amazon EFS íŒŒì¼ ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

EFS is a network file system compatible with both launch types.  
EFSëŠ” ë‘ ì‹¤í–‰ ìœ í˜• ëª¨ë‘ì™€ í˜¸í™˜ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ íŒŒì¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.  

Mounting an EFS file system allows tasks running in any Availability Zone linked to the file system to share the same data and communicate via the file system if needed.  
EFS íŒŒì¼ ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸í•˜ë©´ ì—°ê²°ëœ ê°€ìš© ì˜ì—­ ë‚´ íƒœìŠ¤í¬ê°€ ë™ì¼í•œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê³  í•„ìš”ì‹œ íŒŒì¼ ì‹œìŠ¤í…œì„ í†µí•´ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

The optimal combination is to use Fargate to launch ECS tasks in a serverless fashion and Amazon EFS for persistent file system storage.  
ìµœì ì˜ ì¡°í•©ì€ Fargateë¥¼ ì‚¬ìš©í•´ ECS íƒœìŠ¤í¬ë¥¼ ì„œë²„ë¦¬ìŠ¤ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•˜ê³ , Amazon EFSë¥¼ ì‚¬ìš©í•´ ì§€ì†ì ì¸ íŒŒì¼ ì‹œìŠ¤í…œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.  

EFS is also serverless, pay-as-you-go, and requires no server management.  
EFS ë˜í•œ ì„œë²„ë¦¬ìŠ¤ì´ë©° ì‚¬ìš©í•œ ë§Œí¼ë§Œ ê³¼ê¸ˆë˜ë©°, ì„œë²„ ê´€ë¦¬ê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.  

---

## Key Takeaways
## í•µì‹¬ ìš”ì•½

Amazon ECS offers two launch types: EC2 Launch Type requiring self-managed infrastructure, and Fargate Launch Type which is serverless.  
Amazon ECSëŠ” ë‘ ê°€ì§€ ì‹¤í–‰ ìœ í˜•ì„ ì œê³µí•©ë‹ˆë‹¤: ì¸í”„ë¼ë¥¼ ì§ì ‘ ê´€ë¦¬í•´ì•¼ í•˜ëŠ” EC2 ì‹¤í–‰ ìœ í˜•, ê·¸ë¦¬ê³  ì„œë²„ë¦¬ìŠ¤ì¸ Fargate ì‹¤í–‰ ìœ í˜•ì…ë‹ˆë‹¤.  

ECS tasks run Docker containers on ECS clusters, with EC2 instances running the ECS Agent in the EC2 Launch Type.  
ECS íƒœìŠ¤í¬ëŠ” ECS í´ëŸ¬ìŠ¤í„°ì—ì„œ Docker ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©°, EC2 ì‹¤í–‰ ìœ í˜•ì—ì„œëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ECS ì—ì´ì „íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.  

IAM roles differentiate between EC2 Instance Profile Roles for ECS Agents and ECS Task Roles for individual tasks.  
IAM ì—­í• ì€ ECS ì—ì´ì „íŠ¸ìš© EC2 ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œíŒŒì¼ ì—­í• ê³¼ ê°œë³„ íƒœìŠ¤í¬ìš© ECS íƒœìŠ¤í¬ ì—­í• ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤.  

Load balancers like Application Load Balancer integrate with ECS tasks for HTTP/HTTPS endpoints; Network Load Balancer is for high throughput scenarios.  
Application Load Balancer ê°™ì€ ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ECS íƒœìŠ¤í¬ì™€ í†µí•©ë˜ì–´ HTTP/HTTPS ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ë©°, Network Load BalancerëŠ” ê³ ì²˜ë¦¬ëŸ‰ ì‹œë‚˜ë¦¬ì˜¤ì— ì í•©í•©ë‹ˆë‹¤.  

Amazon EFS provides persistent, shared, multi-AZ storage compatible with both EC2 and Fargate launch types.  
Amazon EFSëŠ” EC2ì™€ Fargate ì‹¤í–‰ ìœ í˜• ëª¨ë‘ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì§€ì†ì ì´ê³  ê³µìœ ë˜ëŠ” ë‹¤ì¤‘ ê°€ìš© ì˜ì—­ ìŠ¤í† ë¦¬ì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
