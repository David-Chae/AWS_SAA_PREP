ì•„ë˜ëŠ” **Site-to-Site VPN / VGW / CGW** ë‚´ìš©ì„ **ê°œë…â€“ë™ì‘â€“ì‹œí—˜ í¬ì¸íŠ¸** ê¸°ì¤€ìœ¼ë¡œ ì •ì œí•œ ì„¤ëª…ì´ë‹¤.
(ê°•ì˜ ë…¸íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë°˜ë³µí•˜ì§€ ì•Šê³ , ì´í•´Â·ê¸°ì–µÂ·ë¬¸ì œí’€ì´ì— ë°”ë¡œ ì“°ì´ë„ë¡ ì¬êµ¬ì„±)

---

## 1ï¸âƒ£ Site-to-Site VPN í•œ ì¤„ ì •ì˜

**AWS VPC â†” ì˜¨í”„ë ˆë¯¸ìŠ¤ ë°ì´í„°ì„¼í„°ë¥¼ ê³µìš© ì¸í„°ë„· ìœ„ì—ì„œ IPsecìœ¼ë¡œ ì•”í˜¸í™”í•´ ì—°ê²°í•˜ëŠ” í„°ë„**ì´ë‹¤.

* ì „ìš©ì„  âŒ
* ì¸í„°ë„· ê¸°ë°˜ + ì•”í˜¸í™” âœ…
* ë¹ ë¥´ê²Œ êµ¬ì¶•, ì €ë¹„ìš©

---

## 2ï¸âƒ£ í•µì‹¬ êµ¬ì„±ìš”ì†Œ (ì‹œí—˜ì—ì„œ ë°˜ë“œì‹œ êµ¬ë¶„)

### ğŸ”¹ Virtual Private Gateway (VGW)

* **AWS ìª½ VPN ì¢…ë‹¨ì **
* VPCì— **attach**ë¨
* VPN concentrator ì—­í• 
* ASN ë³€ê²½ ê°€ëŠ¥ (BGP ì‚¬ìš© ì‹œ)

ğŸ‘‰ â€œAWS ìª½â€ì´ë¼ëŠ” í‚¤ì›Œë“œê°€ ë‚˜ì˜¤ë©´ **VGW**

---

### ğŸ”¹ Customer Gateway (CGW)

* **ì˜¨í”„ë ˆë¯¸ìŠ¤ ìª½ VPN ì¥ë¹„**
* ì‹¤ì œ ë¬¼ë¦¬ ì¥ë¹„ ë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ (ë°©í™”ë²½, ë¼ìš°í„° ë“±)
* AWSê°€ í…ŒìŠ¤íŠ¸í•œ ë””ë°”ì´ìŠ¤ ëª©ë¡ ì¡´ì¬

ğŸ‘‰ â€œíšŒì‚¬/ë°ì´í„°ì„¼í„°/ì˜¨í”„ë ˆë¯¸ìŠ¤â€ â†’ **CGW**

---

## 3ï¸âƒ£ CGW IP ì£¼ì†Œ ì„¤ì • (ìì£¼ í‹€ë¦¬ëŠ” í¬ì¸íŠ¸)

### ê²½ìš° 1ï¸âƒ£ CGWê°€ **ê³µì¸ IP ë³´ìœ **

* ê·¸ **ê³µì¸ IP ê·¸ëŒ€ë¡œ** ì‚¬ìš©

### ê²½ìš° 2ï¸âƒ£ CGWê°€ **ì‚¬ì„¤ IP** + NAT ë’¤

* **NAT ì¥ë¹„ì˜ ê³µì¸ IP** ì‚¬ìš©
* **NAT-Traversal(NAT-T)** í•„ìˆ˜

ğŸ“Œ ì‹œí—˜ì—ì„œ

> â€œCGWê°€ private IPë¥¼ ê°€ì§„ ê²½ìš° ë¬´ì—‡ì„ ì“°ëŠ”ê°€?â€
> â†’ **NAT ì¥ë¹„ì˜ public IP**

---

## 4ï¸âƒ£ Site-to-Site VPNì´ ì•ˆ ë˜ëŠ” ê°€ì¥ í”í•œ ì´ìœ  (ì‹œí—˜ ë‹¨ê³¨)

### âŒ Route Propagation ë¯¸ì„¤ì •

* VPN ì—°ê²°ë§Œ ë§Œë“¤ë©´ **ìë™ ë¼ìš°íŒ… ì•ˆ ë¨**
* **VPC Route Tableì—ì„œ VGW Route Propagation í™œì„±í™” í•„ìˆ˜**

ğŸ‘‰ â€œVPNì€ ì—°ê²°ëëŠ”ë° í†µì‹  ì•ˆ ë¨â€ â†’ **ë¼ìš°íŠ¸ ë¨¼ì € ì˜ì‹¬**

---

## 5ï¸âƒ£ Ping(ICMP) ì•ˆ ë  ë•Œì˜ ì •ë‹µ í¬ì¸íŠ¸

> â€œì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œ EC2ë¡œ pingì´ ì•ˆ ëœë‹¤â€

### âœ… ë°˜ë“œì‹œ í™•ì¸í•  ê²ƒ

* **EC2 Security Group Inboundì— ICMP í—ˆìš©**

ğŸ“Œ ë³´ì•ˆê·¸ë£¹ì€ **ê¸°ë³¸ì ìœ¼ë¡œ ICMP ì°¨ë‹¨**
â†’ ì‹œí—˜ì—ì„œ ë§¤ìš° ìì£¼ í•¨ì •ìœ¼ë¡œ ë‚˜ì˜´

---

## 6ï¸âƒ£ AWS VPN CloudHub (ì•„í‚¤í…ì²˜ ë¬¸ì œìš©)

### ğŸ”¹ ê°œë…

* **ì—¬ëŸ¬ ì˜¨í”„ë ˆë¯¸ìŠ¤ ë„¤íŠ¸ì›Œí¬**ê°€
* **í•˜ë‚˜ì˜ VPC + í•˜ë‚˜ì˜ VGW**ë¥¼ í—ˆë¸Œë¡œ ì—°ê²°
* ê° ì‚¬ì´íŠ¸ëŠ” **ê°ì Site-to-Site VPN**

â¡ï¸ **Hub-and-Spoke VPN ëª¨ë¸**

---

### ğŸ”¹ íŠ¹ì§•

* ì €ë¹„ìš©
* ì „ë¶€ ì¸í„°ë„· ê¸°ë°˜
* VPN ê°„ í†µì‹  ê°€ëŠ¥
* **Dynamic Routing(BGP) í•„ìˆ˜**

ğŸ“Œ â€œì—¬ëŸ¬ ì§€ì‚¬ ê°„ í†µì‹  + ë¹„ìš© ìµœì†Œâ€
â†’ **VPN CloudHub**

---

## 7ï¸âƒ£ VGW vs (ì‹œí—˜ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë¹„êµ íŒ offer)

| êµ¬ë¶„       | VGW        | TGW              |
| -------- | ---------- | ---------------- |
| ëª©ì        | ë‹¨ì¼ VPC VPN | ëŒ€ê·œëª¨ ë©€í‹° VPC/ì˜¨í”„ë ˆë¯¸ìŠ¤ |
| ìŠ¤ì¼€ì¼      | ì œí•œì         | ë§¤ìš° í¼             |
| CloudHub | ê°€ëŠ¥         | ë¶ˆí•„ìš”              |
| ì‹œí—˜ ë ˆë²¨    | Associate  | Pro              |

ğŸ‘‰ **ì´ ê°•ì˜ ë§¥ë½ = VGW**

---

## 8ï¸âƒ£ ì‹œí—˜ ì§ì „ ìš”ì•½ ì•”ê¸° ë¸”ë¡

* Site-to-Site VPN = **ì¸í„°ë„· + IPsec**
* AWS ìª½ = **VGW**
* ì˜¨í”„ë ˆë¯¸ìŠ¤ ìª½ = **CGW**
* CGWê°€ private IPë©´ â†’ **NAT ê³µì¸ IP**
* í†µì‹  ì•ˆ ë˜ë©´ â†’ **Route Propagation**
* Ping ì•ˆ ë˜ë©´ â†’ **SG ICMP**
* ì—¬ëŸ¬ ì§€ì‚¬ ì—°ê²° â†’ **VPN CloudHub**

---

ì¢‹ì€ ì§ˆë¬¸ì´ì•¼.
ì´ ì„¸ ê°œë¥¼ **â€œì™œ í•„ìš”í•œê°€ â†’ í•œ ì¤„ ì •ì˜ â†’ VPNì—ì„œ ë¬´ìŠ¨ ì—­í• ì„ í•˜ëŠ”ê°€â€** ìˆœì„œë¡œ ì •ë¦¬í•˜ë©´ í—·ê°ˆë¦¼ì´ ê±°ì˜ ì‚¬ë¼ì ¸.

---

## 1ï¸âƒ£ ASN (Autonomous System Number)

### ğŸ”¹ ì™œ í•„ìš”í•œê°€

ì¸í„°ë„·ì´ë‚˜ VPNì—ì„œ

> â€œì´ ë„¤íŠ¸ì›Œí¬ê°€ ëˆ„êµ¬ ì†Œì†ì¸ì§€â€
> ë¥¼ ì‹ë³„í•´ì•¼ **ìë™ ë¼ìš°íŒ…**ì´ ê°€ëŠ¥í•´.

---

### ğŸ”¹ í•œ ì¤„ ì •ì˜

**ASN = í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ ì¡°ì§ì„ ì‹ë³„í•˜ëŠ” ê³ ìœ  ë²ˆí˜¸**

* AWS VPCë„ í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬
* íšŒì‚¬ ë°ì´í„°ì„¼í„°ë„ í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬
* ê°ê° **ìê¸° ASN**ì„ ê°€ì§

---

### ğŸ”¹ VPNì—ì„œì˜ ì—­í• 

Site-to-Site VPNì—ì„œ **BGPë¥¼ ì“°ë©´**

* AWS(VGW) ASN â†” ì˜¨í”„ë ˆë¯¸ìŠ¤(CGW) ASN
* ì„œë¡œ ë¼ìš°íŠ¸ ì •ë³´ë¥¼ êµí™˜

ğŸ“Œ ì˜ˆ:

```
AWS VGW ASN: 64512
On-Prem CGW ASN: 65001
```

ğŸ‘‰ â€œë‚˜ëŠ” ì´ ëŒ€ì—­ì„ ê°–ê³  ìˆì–´â€ë¼ê³  ì„œë¡œ ì•Œë ¤ì¤Œ

---

## 2ï¸âƒ£ BGP (Border Gateway Protocol)

### ğŸ”¹ ì™œ í•„ìš”í•œê°€

VPNì—ì„œ

* ë„¤íŠ¸ì›Œí¬ê°€ ì¶”ê°€ë˜ê±°ë‚˜
* ê²½ë¡œê°€ ë°”ë€Œë©´
  **ì‚¬ëŒì´ ì¼ì¼ì´ ë¼ìš°íŠ¸ ìˆ˜ì •í•˜ê¸° ì‹«ê¸° ë•Œë¬¸**

---

### ğŸ”¹ í•œ ì¤„ ì •ì˜

**BGP = ë„¤íŠ¸ì›Œí¬ ê°„ì— ê²½ë¡œë¥¼ ìë™ìœ¼ë¡œ êµí™˜í•˜ëŠ” í”„ë¡œí† ì½œ**

---

### ğŸ”¹ VPNì—ì„œì˜ ì—­í• 

BGPë¥¼ ì‚¬ìš©í•˜ë©´:

* ì˜¨í”„ë ˆë¯¸ìŠ¤ â†” AWS ì‚¬ì´
* **ë¼ìš°íŠ¸ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸**
* ì¥ì•  ë°œìƒ ì‹œ **ìë™ ìš°íšŒ**

ğŸ“Œ ê·¸ë˜ì„œ:

* **Dynamic Routing = BGP**
* **Static Routing = ìˆ˜ë™**

---

### ğŸ”¹ ì‹œí—˜ìš© í‚¤ì›Œë“œ ì—°ê²°

| í‚¤ì›Œë“œ             | ì •ë‹µ       |
| --------------- | -------- |
| Dynamic routing | BGP      |
| ìë™ ê²½ë¡œ êµí™˜        | BGP      |
| ASN ì–¸ê¸‰ë¨         | BGP ì‚¬ìš© ì¤‘ |

---

## 3ï¸âƒ£ Route Propagation (ê°€ì¥ í—·ê°ˆë¦¬ëŠ” ê°œë…)

### ğŸ”¹ ì™œ í•„ìš”í•œê°€

BGPê°€ ë¼ìš°íŠ¸ë¥¼ â€œì•Œë ¤ì¤˜ë„â€

> VPC Route Tableì— **ìë™ìœ¼ë¡œ ë°˜ì˜í• ì§€ ë§ì§€**ëŠ” ë³„ê°œ

---

### ğŸ”¹ í•œ ì¤„ ì •ì˜

**Route Propagation = VGWê°€ ë°°ìš´ ê²½ë¡œë¥¼ VPC Route Tableì— ìë™ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” ê¸°ëŠ¥**

---

### ğŸ”¹ ì‰½ê²Œ ë§í•˜ë©´

1ï¸âƒ£ VPN ì—°ê²° + BGP ì„¤ì • ì™„ë£Œ
2ï¸âƒ£ VGWëŠ” ì˜¨í”„ë ˆë¯¸ìŠ¤ ë¼ìš°íŠ¸ë¥¼ **ì•Œê³  ìˆìŒ**
3ï¸âƒ£ âŒ í•˜ì§€ë§Œ Route Tableì—ëŠ” ì—†ìŒ
4ï¸âƒ£ âœ… Route Propagation ì¼œì•¼ Route Tableì— ì¶”ê°€ë¨

---

### ğŸ”¹ ê·¸ë¦¼ìœ¼ë¡œ ì´í•´

```
On-Prem Network
     â†“ (BGP)
VGW (ë¼ìš°íŠ¸ ìˆ˜ì‹ )
     â†“ (Route Propagation)
VPC Route Table
     â†“
EC2 íŠ¸ë˜í”½ ì „ë‹¬
```

ğŸ“Œ **ì´ ë‹¨ê³„ ë¹ ì§€ë©´ í†µì‹  ì•ˆ ë¨**

---

## 4ï¸âƒ£ ì´ ì„¸ ê°œì˜ ê´€ê³„ í•œ ë²ˆì— ì •ë¦¬

| ê°œë…                | ì—­í•                |
| ----------------- | ---------------- |
| ASN               | ë„¤íŠ¸ì›Œí¬ ID          |
| BGP               | ë¼ìš°íŠ¸ ìë™ êµí™˜        |
| Route Propagation | êµí™˜ëœ ë¼ìš°íŠ¸ë¥¼ VPCì— ì ìš© |

---

## 5ï¸âƒ£ ì‹œí—˜ì—ì„œ ë‚˜ì˜¤ëŠ” ì „í˜•ì  í•¨ì •

### â“ â€œVPN ì—°ê²°ì€ ë˜ì—ˆëŠ”ë° í†µì‹ ì´ ì•ˆ ëœë‹¤â€

âœ… ì •ë‹µ:

* Route Propagation ë¯¸ì„¤ì •

---

### â“ â€œì—¬ëŸ¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ìë™ìœ¼ë¡œ ì—°ê²°í•˜ê³  ì‹¶ë‹¤â€

âœ… ì •ë‹µ:

* BGP + ASN

---

### â“ â€œë¼ìš°íŠ¸ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë„£ê³  ì‹¶ì§€ ì•Šë‹¤â€

âœ… ì •ë‹µ:

* Dynamic routing (BGP)

---

## 6ï¸âƒ£ ë‹¨ í•œ ì¤„ ìš”ì•½ (ì•”ê¸°ìš©)

* **ASN**: ë„¤íŠ¸ì›Œí¬ ì‹ ë¶„ì¦
* **BGP**: ê¸¸ ì•Œë ¤ì£¼ëŠ” ìë™ ë„¤ë¹„
* **Route Propagation**: ê·¸ ê¸¸ì„ ì‹¤ì œ ì§€ë„(Route Table)ì— ë°˜ì˜




```markdown
# Site-to-Site VPN, Virtual Private Gateway & Customer Gateway  
# ì‚¬ì´íŠ¸ ê°„ VPN, ê°€ìƒ í”„ë¼ì´ë¹— ê²Œì´íŠ¸ì›¨ì´(VGW) ë° ê³ ê° ê²Œì´íŠ¸ì›¨ì´(CGW)  

ğŸ® ê²Œì„ë³´ìƒ: "VPN Master Badge" +650 XP  

---

## Introduction to Site-to-Site VPN  
## ì‚¬ì´íŠ¸ ê°„ VPN ì†Œê°œ  

The concept of site-to-site VPN involves connecting an AWS Virtual Private Cloud (VPC) to a corporate data center using a private, encrypted connection over the public internet.  
ì‚¬ì´íŠ¸ ê°„ VPN ê°œë…ì€ AWS VPCë¥¼ ê¸°ì—… ë°ì´í„° ì„¼í„°ì™€ ê³µìš© ì¸í„°ë„·ì„ í†µí•´ í”„ë¼ì´ë¹—í•˜ê³  ì•”í˜¸í™”ëœ ì—°ê²°ë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.  

This setup enables secure communication between the two networks.  
ì´ ì„¤ì •ì€ ë‘ ë„¤íŠ¸ì›Œí¬ ê°„ ì•ˆì „í•œ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.  

To establish this connection, two key components are required:  
ì´ ì—°ê²°ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‘ ê°€ì§€ í•µì‹¬ êµ¬ì„± ìš”ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤:  

- A Customer Gateway (CGW) on the corporate side.  
- ê¸°ì—… ì¸¡ì˜ ê³ ê° ê²Œì´íŠ¸ì›¨ì´(CGW)  

- A Virtual Private Gateway (VGW) on the AWS VPC side.  
- AWS VPC ì¸¡ì˜ ê°€ìƒ í”„ë¼ì´ë¹— ê²Œì´íŠ¸ì›¨ì´(VGW)  

The VPN connection is encrypted and traverses the public internet, effectively linking the network of the VPC to the corporate data center's network.  
VPN ì—°ê²°ì€ ì•”í˜¸í™”ë˜ë©° ê³µìš© ì¸í„°ë„·ì„ í†µê³¼í•˜ì—¬ VPC ë„¤íŠ¸ì›Œí¬ì™€ ê¸°ì—… ë°ì´í„° ì„¼í„° ë„¤íŠ¸ì›Œí¬ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.  

---

## Virtual Private Gateway (VGW)  
## ê°€ìƒ í”„ë¼ì´ë¹— ê²Œì´íŠ¸ì›¨ì´(VGW)  

The VGW acts as a VPN concentrator on the AWS side of the VPN connection.  
VGWëŠ” VPN ì—°ê²°ì—ì„œ AWS ì¸¡ì˜ VPN ì§‘ì¤‘ ì¥ì¹˜ ì—­í• ì„ í•©ë‹ˆë‹¤.  

It is created and attached to the VPC from which the site-to-site VPN connection will be established.  
VGWëŠ” ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²°ì„ ì„¤ì •í•  VPCì— ìƒì„±ë˜ì–´ ì—°ê²°ë©ë‹ˆë‹¤.  

Additionally, it is possible to customize the Autonomous System Number (ASN) if needed.  
í•„ìš” ì‹œ ììœ¨ ì‹œìŠ¤í…œ ë²ˆí˜¸(ASN)ë¥¼ ì‚¬ìš©ì ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.  

---

## Customer Gateway (CGW)  
## ê³ ê° ê²Œì´íŠ¸ì›¨ì´(CGW)  

The Customer Gateway represents the physical or software device on the corporate data center side of the VPN connection.  
CGWëŠ” VPN ì—°ê²°ì—ì„œ ê¸°ì—… ë°ì´í„° ì„¼í„° ì¸¡ì˜ ë¬¼ë¦¬ì  ë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì¥ì¹˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  

AWS maintains a list of tested and supported customer gateway devices to ensure compatibility.  
AWSëŠ” í˜¸í™˜ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ëœ ì§€ì› CGW ì¥ì¹˜ ëª©ë¡ì„ ìœ ì§€í•©ë‹ˆë‹¤.  

---

## Setting Up the Customer Gateway Device  
## ê³ ê° ê²Œì´íŠ¸ì›¨ì´ ì¥ì¹˜ ì„¤ì •  

When configuring the customer gateway device, the IP address used depends on whether the device has a public or private IP:  
CGW ì¥ì¹˜ë¥¼ êµ¬ì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” IP ì£¼ì†ŒëŠ” ì¥ì¹˜ê°€ ê³µìš© IPë¥¼ ê°–ëŠ”ì§€ ì‚¬ì„¤ IPë¥¼ ê°–ëŠ”ì§€ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.  

- If the CGW has a public, internet-routable IP address, this public IP is used to establish connectivity between the VGW and CGW.  
- CGWê°€ ê³µìš© ì¸í„°ë„· ë¼ìš°íŒ… ê°€ëŠ¥í•œ IPë¥¼ ê°–ëŠ” ê²½ìš°, VGWì™€ CGW ê°„ ì—°ê²°ì„ ìœ„í•´ ì´ ê³µìš© IPë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  

- If the CGW has a private IP address, it is typically behind a NAT device with NAT Traversal (NAT-T) enabled.  
- CGWê°€ ì‚¬ì„¤ IPë¥¼ ê°–ëŠ” ê²½ìš° ì¼ë°˜ì ìœ¼ë¡œ NAT ì¥ì¹˜ ë’¤ì— ìˆìœ¼ë©° NAT-Tê°€ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  

In this case, the public IP of the NAT device is used for the VPN connection.  
ì´ ê²½ìš° VPN ì—°ê²°ì—ëŠ” NAT ì¥ì¹˜ì˜ ê³µìš© IPê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.  

---

## Important Exam Notes  
## ì‹œí—˜ ëŒ€ë¹„ ì¤‘ìš” ì‚¬í•­  

The site-to-site VPN connection will not function until route propagation is enabled in the VPC route tables for the relevant subnets.  
ê´€ë ¨ ì„œë¸Œë„·ì— ëŒ€í•´ VPC ë¼ìš°íŠ¸ í…Œì´ë¸”ì—ì„œ ê²½ë¡œ ì „íŒŒ(Route Propagation)ê°€ í™œì„±í™”ë˜ì–´ì•¼ ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²°ì´ ì‘ë™í•©ë‹ˆë‹¤.  

To allow ping (ICMP) traffic from on-premises to AWS EC2 instances, ensure that the ICMP protocol is enabled inbound in the security group attached to the instances.  
ì˜¨í”„ë ˆë¯¸ìŠ¤ì—ì„œ AWS EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ping(ICMP) íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ë ¤ë©´, ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°ëœ ë³´ì•ˆ ê·¸ë£¹ì—ì„œ ICMP ì¸ë°”ìš´ë“œê°€ í™œì„±í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.  

This is a common point of confusion in exams.  
ì´ëŠ” ì‹œí—˜ì—ì„œ í˜¼ë™í•˜ê¸° ì‰¬ìš´ ë¶€ë¶„ì…ë‹ˆë‹¤.  

---

## AWS VPN CloudHub  
## AWS VPN CloudHub  

AWS VPN CloudHub allows multiple customer networks or data centers, each with their own customer gateway, to communicate securely through a single VPC's virtual private gateway.  
AWS VPN CloudHubëŠ” ê°ê¸° ë‹¤ë¥¸ CGWë¥¼ ê°€ì§„ ì—¬ëŸ¬ ê³ ê° ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ë°ì´í„° ì„¼í„°ê°€ ë‹¨ì¼ VPCì˜ VGWë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ í†µì‹ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.  

This is achieved by establishing multiple site-to-site VPN connections to the same VGW.  
ì´ëŠ” ë™ì¼ VGWì— ëŒ€í•´ ì—¬ëŸ¬ ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²°ì„ ì„¤ì •í•˜ì—¬ êµ¬í˜„ë©ë‹ˆë‹¤.  

This setup follows a low-cost hub-and-spoke model for primary or secondary network connectivity between different locations, using only VPN connections.  
ì´ ì„¤ì •ì€ VPN ì—°ê²°ë§Œ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ìœ„ì¹˜ ê°„ 1ì°¨ ë˜ëŠ” 2ì°¨ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ìœ„í•œ ì €ë¹„ìš© í—ˆë¸Œ-ìŠ¤í¬í¬ ëª¨ë¸ì„ ë”°ë¦…ë‹ˆë‹¤.  

With CloudHub, the customer networks can communicate with one another through the VPN connections established to the VGW.  
CloudHubë¥¼ í†µí•´ ê³ ê° ë„¤íŠ¸ì›Œí¬ëŠ” VGWì— ì„¤ì •ëœ VPN ì—°ê²°ì„ í†µí•´ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  

Since the VPN traffic traverses the public internet, the connections are encrypted to maintain security.  
VPN íŠ¸ë˜í”½ì´ ê³µìš© ì¸í„°ë„·ì„ í†µê³¼í•˜ë¯€ë¡œ ì—°ê²°ì€ ì•”í˜¸í™”ë˜ì–´ ë³´ì•ˆì´ ìœ ì§€ë©ë‹ˆë‹¤.  

To configure CloudHub:  
CloudHubë¥¼ êµ¬ì„±í•˜ë ¤ë©´:  

- Set up multiple site-to-site VPN connections on the same virtual private gateway.  
- ë™ì¼ VGWì—ì„œ ì—¬ëŸ¬ ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²° ì„¤ì •  

- Enable dynamic routing.  
- ë™ì  ë¼ìš°íŒ… í™œì„±í™”  

- Configure route tables accordingly.  
- ë¼ìš°íŠ¸ í…Œì´ë¸”ì„ ì ì ˆíˆ êµ¬ì„±  

---

## Summary  
## ìš”ì•½  

Site-to-site VPNs provide a secure, encrypted connection over the public internet between an AWS VPC and a corporate data center.  
ì‚¬ì´íŠ¸ ê°„ VPNì€ AWS VPCì™€ ê¸°ì—… ë°ì´í„° ì„¼í„° ê°„ ê³µìš© ì¸í„°ë„·ì„ í†µí•œ ì•ˆì „í•˜ê³  ì•”í˜¸í™”ëœ ì—°ê²°ì„ ì œê³µí•©ë‹ˆë‹¤.  

The key components are the Virtual Private Gateway on AWS and the Customer Gateway on the corporate side.  
í•µì‹¬ êµ¬ì„± ìš”ì†ŒëŠ” AWS ì¸¡ì˜ VGWì™€ ê¸°ì—… ì¸¡ì˜ CGWì…ë‹ˆë‹¤.  

Proper configuration of IP addresses, route propagation, and security group rules is essential for successful connectivity.  
ì„±ê³µì ì¸ ì—°ê²°ì„ ìœ„í•´ IP ì£¼ì†Œ, ê²½ë¡œ ì „íŒŒ(Route Propagation), ë³´ì•ˆ ê·¸ë£¹ ê·œì¹™ì„ ì ì ˆíˆ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.  

AWS VPN CloudHub extends this capability to multiple customer networks, enabling secure communication across multiple sites.  
AWS VPN CloudHubëŠ” ì´ ê¸°ëŠ¥ì„ ì—¬ëŸ¬ ê³ ê° ë„¤íŠ¸ì›Œí¬ë¡œ í™•ì¥í•˜ì—¬ ì—¬ëŸ¬ ì‚¬ì´íŠ¸ ê°„ ì•ˆì „í•œ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.  

---

## Key Takeaways  
## í•µì‹¬ ìš”ì•½  

- Site-to-site VPN connects an AWS VPC to a corporate data center over the public internet using encrypted tunnels.  
- ì‚¬ì´íŠ¸ ê°„ VPNì€ ì•”í˜¸í™” í„°ë„ì„ ì‚¬ìš©í•˜ì—¬ AWS VPCë¥¼ ê¸°ì—… ë°ì´í„° ì„¼í„°ì™€ ê³µìš© ì¸í„°ë„·ìœ¼ë¡œ ì—°ê²°  

- The VPN requires a Virtual Private Gateway (VGW) on the AWS side and a Customer Gateway (CGW) device on the corporate side.  
- VPNì€ AWS ì¸¡ì˜ VGWì™€ ê¸°ì—… ì¸¡ CGW ì¥ì¹˜ê°€ í•„ìš”  

- The CGW can have a public IP or be behind a NAT device with NAT-T enabled; the public IP used depends accordingly.  
- CGWëŠ” ê³µìš© IPë¥¼ ê°–ê±°ë‚˜ NAT-Tê°€ í™œì„±í™”ëœ NAT ì¥ì¹˜ ë’¤ì— ìˆì„ ìˆ˜ ìˆìœ¼ë©°, VPN ì—°ê²°ì— ì‚¬ìš©í•  ê³µìš© IPëŠ” ì´ì— ë”°ë¼ ê²°ì •  

- Route propagation must be enabled in the VPC route tables for the VPN connection to function properly.  
- VPN ì—°ê²°ì´ ì •ìƒ ì‘ë™í•˜ë ¤ë©´ VPC ë¼ìš°íŠ¸ í…Œì´ë¸”ì—ì„œ ê²½ë¡œ ì „íŒŒ(Route Propagation)ê°€ í™œì„±í™”ë˜ì–´ì•¼ í•¨  

- AWS VPN CloudHub allows multiple customer networks to securely communicate through a single VGW using multiple VPN connections.  
- AWS VPN CloudHubëŠ” ì—¬ëŸ¬ ê³ ê° ë„¤íŠ¸ì›Œí¬ê°€ ë‹¨ì¼ VGWë¥¼ í†µí•´ ì—¬ëŸ¬ VPN ì—°ê²°ë¡œ ì•ˆì „í•˜ê²Œ í†µì‹ í•˜ë„ë¡ ì§€ì›  

- Security group rules, such as enabling ICMP inbound, are necessary for certain traffic like ping to work over the VPN.  
- ping ê°™ì€ íŠ¸ë˜í”½ì´ VPNì—ì„œ ì‘ë™í•˜ë ¤ë©´ ICMP ì¸ë°”ìš´ë“œ í™œì„±í™” ë“± ë³´ì•ˆ ê·¸ë£¹ ê·œì¹™ì´ í•„ìš”  
```
