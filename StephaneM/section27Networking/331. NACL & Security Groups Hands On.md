ì•„ë˜ ì‹¤ìŠµì€ **â€œSecurity Groupì€ í—ˆìš©í–ˆëŠ”ë° ì™œ ì ‘ì†ì´ ì•ˆ ë˜ì§€?â€**ë¼ëŠ”
AWS ë„¤íŠ¸ì›Œí¬ì—ì„œ **ê°€ì¥ í”í•œ í˜¼ë€**ì„ ì§ì ‘ ëˆˆìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ë° ëª©ì ì´ ìˆìŠµë‹ˆë‹¤.

ì „ì²´ë¥¼ **ì‹¤ìŠµ ìŠ¤í† ë¦¬ â†’ ì‹¤í—˜ 4ë‹¨ê³„ â†’ í•µì‹¬ ì •ë¦¬** íë¦„ìœ¼ë¡œ ì•„ì£¼ ì‰½ê²Œ í’€ì–´ë³¼ê²Œìš”.

---

## 1ï¸âƒ£ ì‹œì‘ ìƒíƒœ: Default NACLì€ ì‚¬ì‹¤ìƒ â€˜ì—´ë ¤ ìˆìŒâ€™

### ğŸ“ Network ACL í™”ë©´ì—ì„œ í™•ì¸í•œ ì‚¬ì‹¤

* í˜„ì¬ VPCì—ëŠ” **Default NACL**ì´ ìˆìŒ
* ì´ Default NACLì€:

  * Inbound: **ALL ALLOW**
  * Outbound: **ALL ALLOW**

ğŸ‘‰ ë§¨ ë§ˆì§€ë§‰ì— `DENY ALL` ê·œì¹™ì´ ìˆê¸´ í•˜ì§€ë§Œ
ì•ì— ìˆëŠ” **ALLOW ê·œì¹™(ë²ˆí˜¸ 100)** ì´ ë¨¼ì € ì ìš©ë˜ë¯€ë¡œ
**ì‚¬ì‹¤ìƒ ëª¨ë“  íŠ¸ë˜í”½ í—ˆìš© ìƒíƒœ**

ğŸ“Œ ê·¸ë˜ì„œ ê¸°ë³¸ í™˜ê²½ì—ì„œëŠ” NACL ë•Œë¬¸ì— ë§‰í ì¼ì´ ê±°ì˜ ì—†ìŒ

---

## 2ï¸âƒ£ Bastion Hostì— ì›¹ ì„œë²„ ë„ìš°ê¸° (ì‹¤í—˜ ì¤€ë¹„)

### ğŸ¯ ëª©ì 

> â€œHTTP íŠ¸ë˜í”½ì´ ì‹¤ì œë¡œ ì°¨ë‹¨ë˜ëŠ” ê±¸ ëˆˆìœ¼ë¡œ í™•ì¸â€

### ğŸ›  Bastion Hostì—ì„œ ìˆ˜í–‰

```bash
sudo yum install -y httpd
sudo systemctl enable httpd
sudo systemctl start httpd
sudo su -c 'echo "hello world" > /var/www/html/index.html'
```

ğŸ‘‰ Bastion Hostê°€ **ì›¹ ì„œë²„**ê°€ ë¨

---

## 3ï¸âƒ£ Security Groupì—ì„œ HTTP í—ˆìš©

### í˜„ì¬ ìƒíƒœ

* Bastion SG:

  * SSH(22)ë§Œ í—ˆìš©

### ë³€ê²½

* Inbound Rule ì¶”ê°€:

  * HTTP (80)
  * Source: Anywhere

### ê²°ê³¼

* ë¸Œë¼ìš°ì €ì—ì„œ Bastionì˜ **Public IP** ì ‘ì†
* âœ… `"hello world"` ì¶œë ¥

ğŸ‘‰ **Security Group OK**

---

## 4ï¸âƒ£ ì´ì œ NACLë¡œ HTTP ì°¨ë‹¨í•´ë³´ê¸°

### ğŸ”´ NACL Inbound Rule ì¶”ê°€

* Rule number: **80**
* Type: HTTP
* Source: Anywhere
* Action: **DENY**

âš ï¸ Rule 80ì€:

* ê¸°ì¡´ ALLOW (100)ë³´ë‹¤ **ìš°ì„ ìˆœìœ„ ë†’ìŒ**

---

### ê²°ê³¼

* í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
* âŒ ë¬´í•œ ë¡œë”© (Timeout)

ğŸ“Œ **Security Groupì€ í—ˆìš©í–ˆëŠ”ë°ë„ ì ‘ì† ì•ˆ ë¨**
ğŸ‘‰ NACLì´ ë¨¼ì € ë§‰ì•˜ê¸° ë•Œë¬¸

---

## 5ï¸âƒ£ Rule ë²ˆí˜¸ê°€ ì™œ ì¤‘ìš”í•œì§€ ë³´ì—¬ì£¼ëŠ” ì‹¤í—˜

### ğŸ” ë³€ê²½

* DENY HTTP ê·œì¹™ ë²ˆí˜¸:

  * `80 â†’ 140`

### ì´ìœ 

* ê¸°ì¡´ ALLOW ê·œì¹™: 100
* **100ì´ ë¨¼ì € í‰ê°€ë¨**

### ê²°ê³¼

* í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
* âœ… ë‹¤ì‹œ `"hello world"`

ğŸ“Œ **NACLì€ ìˆ«ìê°€ ì „ë¶€**

> â€œë‚®ì€ ìˆ«ìê°€ ì´ê¸´ë‹¤â€

---

## 6ï¸âƒ£ NACLì´ Statelessí•˜ë‹¤ëŠ” ì¦ê±°

### ğŸ”´ Outbound Rule ë³€ê²½

* ê¸°ì¡´:

  * ALLOW ALL
* ë³€ê²½:

  * **DENY ALL**

### ìƒí™©

* Inbound: HTTP í—ˆìš©
* Outbound: ì „ë¶€ ì°¨ë‹¨

### ê²°ê³¼

* í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
* âŒ ë¬´í•œ ë¡œë”©

ğŸ“Œ ì´ìœ :

* ìš”ì²­ì€ ë“¤ì–´ì™”ì§€ë§Œ
* **ì‘ë‹µì´ ë°–ìœ¼ë¡œ ë‚˜ê°ˆ ìˆ˜ ì—†ìŒ**

ğŸ‘‰ **NACLì€ Stateless**

* ìš”ì²­ / ì‘ë‹µ **ê°ê° ê·œì¹™ í•„ìš”**

---

## 7ï¸âƒ£ Security Groupì€ ì™œ ë‹¤ë¥¼ê¹Œ?

### NACL Outbound ë‹¤ì‹œ ALLOW ALLë¡œ ë³µêµ¬

ì´ì œ:

### ğŸ”´ Security Group Outbound ì „ë¶€ ì œê±°

* Outbound rules: âŒ ì—†ìŒ

### ê²°ê³¼

* ë¸Œë¼ìš°ì €ì—ì„œ í˜ì´ì§€ ì ‘ì†
* âœ… ì •ìƒ ì‘ë™

ğŸ“Œ ì´ìœ :

* Security Groupì€ **Stateful**
* ë“¤ì–´ì˜¨ ìš”ì²­ì˜ ì‘ë‹µì€ **ìë™ í—ˆìš©**

---

### í•˜ì§€ë§Œ!

EC2ì—ì„œ ì§ì ‘:

```bash
curl google.com
```

âŒ ì‹¤íŒ¨

ğŸ‘‰ ì´ìœ :

* **ìƒˆë¡œìš´ Outbound ì—°ê²°**
* SG Outbound ê·œì¹™ì´ ì—†ì–´ì„œ ì°¨ë‹¨

---

## 8ï¸âƒ£ ë‘˜ì˜ ê´€ê³„ ì •ë¦¬ (ì´ ì‹¤ìŠµì˜ í•µì‹¬)

> **Security Groupì´ í—ˆìš©í•´ë„
> NACLì´ ë§‰ìœ¼ë©´ ëì´ë‹¤**

ë‘˜ ë‹¤ í†µê³¼í•´ì•¼ íŠ¸ë˜í”½ì´ íë¦„

---

## 9ï¸âƒ£ ì‹¤ìŠµìœ¼ë¡œ ì–»ì€ í•µì‹¬ ì •ë¦¬

### âœ” Network ACL

* Subnet ë‹¨ìœ„
* Stateless
* Rule ë²ˆí˜¸ ì¤‘ìš”
* Inbound / Outbound ëª¨ë‘ ì„¤ì • í•„ìš”

---

### âœ” Default NACL

* Inbound / Outbound ì „ë¶€ í—ˆìš©
* ì²˜ìŒì—” ë¬¸ì œ ì•ˆ ìƒê¹€

---

### âœ” Security Group

* EC2 ë‹¨ìœ„
* Stateful
* ì‘ë‹µ íŠ¸ë˜í”½ ìë™ í—ˆìš©

---

## ğŸ”Ÿ ì‹œí—˜Â·ì‹¤ë¬´ìš© í•œ ì¤„ ìš”ì•½

> **â€œì ‘ì†ì€ ë˜ëŠ”ë° ì‘ë‹µì´ ì—†ë‹¤â€ â†’ NACL Outbound ì˜ì‹¬
> â€œSG ì—´ì—ˆëŠ”ë° ì•ˆ ëœë‹¤â€ â†’ NACL ë¨¼ì € í™•ì¸**

````markdown
# NACL & Security Groups Hands On  
# NACL ë° ë³´ì•ˆ ê·¸ë£¹ ì‹¤ìŠµ  

ğŸ® ê²Œì„ë³´ìƒ: "Firewall Explorer" +500 XP  

---

## Introduction to Network ACLs  
## ë„¤íŠ¸ì›Œí¬ ACL ì†Œê°œ  

Let's examine our network ACLs.  
ìš°ë¦¬ì˜ ë„¤íŠ¸ì›Œí¬ ACLì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.  

On the left-hand side, navigate to the Network ACLs section.  
ì™¼ìª½ ë©”ë‰´ì—ì„œ Network ACLs ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.  

For our VPC subnets, there is a default network ACL associated with four subnets.  
ìš°ë¦¬ VPC ì„œë¸Œë„·ì—ëŠ” ë„¤ ê°œì˜ ì„œë¸Œë„·ê³¼ ì—°ê²°ëœ ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ACLì´ ìˆìŠµë‹ˆë‹¤.  

It is important to note that this default NACL allows all inbound and outbound traffic on all ports everywhere.  
ê¸°ë³¸ NACLì€ ëª¨ë“  í¬íŠ¸ì˜ ëª¨ë“  ì¸ë°”ìš´ë“œ ë° ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì„ í—ˆìš©í•œë‹¤ëŠ” ì ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  

The last rule denies traffic, but it never takes effect because the preceding allow rule has higher precedence.  
ë§ˆì§€ë§‰ ê·œì¹™ì€ íŠ¸ë˜í”½ì„ ê±°ë¶€í•˜ì§€ë§Œ, ì•ì„œ ìˆëŠ” í—ˆìš© ê·œì¹™ì´ ìš°ì„ í•˜ë¯€ë¡œ ì‹¤ì œë¡œëŠ” ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  

---

## Setting Up a Web Server on the Bastion Host  
## ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì—ì„œ ì›¹ ì„œë²„ ì„¤ì •  

Next, let's proceed to our EC2 instances and select the Bastion host.  
ë‹¤ìŒìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ì´ë™í•˜ì—¬ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.  

We will start an HTTP server on this instance to test connectivity.  
ì—°ê²° í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ HTTP ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.  

Connect to the instance and install the HTTPD package using the following command:  
ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•˜ê³  ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ HTTPD íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤:  

```bash
sudo yum install -y httpd
````

HTTPD ì„¤ì¹˜ ëª…ë ¹ì…ë‹ˆë‹¤.

After installation, enable and start the HTTPD service with these commands:
ì„¤ì¹˜ í›„, ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ HTTPD ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í•˜ê³  ì‹œì‘í•©ë‹ˆë‹¤:

```bash
sudo systemctl enable httpd
sudo systemctl start httpd
```

ì„œë¹„ìŠ¤ í™œì„±í™” ë° ì‹œì‘ ëª…ë ¹ì…ë‹ˆë‹¤.

Then, create a simple web page by echoing "hello world" into the index.html file:
ê·¸ëŸ° ë‹¤ìŒ, index.html íŒŒì¼ì— "hello world"ë¥¼ ì‘ì„±í•˜ì—¬ ê°„ë‹¨í•œ ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
sudo su -c 'echo "hello world" > /var/www/html/index.html'
```

ê°„ë‹¨í•œ ì›¹ í˜ì´ì§€ ìƒì„± ëª…ë ¹ì…ë‹ˆë‹¤.

---

## Configuring Security Group for HTTP Access

## HTTP ì ‘ì†ì„ ìœ„í•œ ë³´ì•ˆ ê·¸ë£¹ êµ¬ì„±

Ensure that the Bastion host's security group allows HTTP traffic.
ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì˜ ë³´ì•ˆ ê·¸ë£¹ì´ HTTP íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Currently, only port 22 (SSH) is allowed.
í˜„ì¬ëŠ” í¬íŠ¸ 22(SSH)ë§Œ í—ˆìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

Edit the inbound rules to add an HTTP rule from anywhere and save the changes.
ì¸ë°”ìš´ë“œ ê·œì¹™ì„ í¸ì§‘í•˜ì—¬ ì–´ë””ì„œë‚˜ HTTP ì ‘ì†ì„ í—ˆìš©í•˜ë„ë¡ ì¶”ê°€í•˜ê³  ë³€ê²½ ì‚¬í•­ì„ ì €ì¥í•©ë‹ˆë‹¤.

After updating the security group, access the Bastion host's public IP address in a browser.
ë³´ì•ˆ ê·¸ë£¹ ì—…ë°ì´íŠ¸ í›„, ë¸Œë¼ìš°ì €ì—ì„œ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì˜ ê³µìš© IPì— ì ‘ì†í•©ë‹ˆë‹¤.

You should see the "hello world" message, confirming HTTP connectivity.
"hello world" ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë©´ HTTP ì—°ê²°ì´ í™•ì¸ëœ ê²ƒì…ë‹ˆë‹¤.

---

## Modifying Network ACL Inbound Rules

## ë„¤íŠ¸ì›Œí¬ ACL ì¸ë°”ìš´ë“œ ê·œì¹™ ìˆ˜ì •

Now, let's examine the default NACL's inbound rules.
ì´ì œ ê¸°ë³¸ NACLì˜ ì¸ë°”ìš´ë“œ ê·œì¹™ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

Currently, all traffic is allowed from anywhere.
í˜„ì¬ëŠ” ëª¨ë“  íŠ¸ë˜í”½ì´ ì–´ë””ì„œë‚˜ í—ˆìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

We will add a new rule with rule number 80 to deny HTTP traffic from anywhere.
ê·œì¹™ ë²ˆí˜¸ 80ìœ¼ë¡œ ì–´ë””ì„œë‚˜ ì˜¤ëŠ” HTTP íŠ¸ë˜í”½ì„ ê±°ë¶€í•˜ëŠ” ìƒˆ ê·œì¹™ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

Save the changes and sort the rules by rule number to observe precedence.
ë³€ê²½ ì‚¬í•­ì„ ì €ì¥í•˜ê³  ê·œì¹™ ë²ˆí˜¸ë³„ë¡œ ì •ë ¬í•˜ì—¬ ìš°ì„ ìˆœìœ„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

With this deny rule in place, refreshing the Bastion host's web page results in an infinite loading timeout.
ì´ ê±°ë¶€ ê·œì¹™ì´ ì ìš©ë˜ë©´, ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ì˜ ì›¹ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ë©´ ë¬´í•œ ë¡œë”© íƒ€ì„ì•„ì›ƒì´ ë°œìƒí•©ë‹ˆë‹¤.

This demonstrates that the NACL acted as a firewall and blocked the HTTP request.
ì´ëŠ” NACLì´ ë°©í™”ë²½ ì—­í• ì„ í•˜ì—¬ HTTP ìš”ì²­ì„ ì°¨ë‹¨í–ˆìŒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

## Adjusting Rule Precedence in Network ACLs

## ë„¤íŠ¸ì›Œí¬ ACL ê·œì¹™ ìš°ì„ ìˆœìœ„ ì¡°ì •

Next, change the deny HTTP rule's number to 140 and save.
ë‹¤ìŒìœ¼ë¡œ, HTTP ê±°ë¶€ ê·œì¹™ ë²ˆí˜¸ë¥¼ 140ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.

Since rule 140 has lower precedence than the existing allow rule at 100, refreshing the page now successfully loads the "hello world" message.
ê·œì¹™ 140ì€ ê¸°ì¡´ í—ˆìš© ê·œì¹™ 100ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë‚®ê¸° ë•Œë¬¸ì— í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ë©´ "hello world" ë©”ì‹œì§€ê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤.

This illustrates that rule numbers determine precedence, with lower numbers evaluated first.
ì´ëŠ” ê·œì¹™ ë²ˆí˜¸ê°€ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•˜ë©°, ë‚®ì€ ë²ˆí˜¸ê°€ ë¨¼ì € í‰ê°€ë¨ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

---

## Demonstrating Statelessness of Network ACLs

## ë„¤íŠ¸ì›Œí¬ ACL ìƒíƒœ ë¹„ì €ì¥ ì„±ê²© ì‹œì—°

Let's explore the stateless nature of NACLs.
NACLì˜ ìƒíƒœ ë¹„ì €ì¥ íŠ¹ì„±ì„ ì‚´í´ë´…ì‹œë‹¤.

Edit the outbound rules and change the rule that currently allows all traffic to deny all traffic instead.
ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì„ í¸ì§‘í•˜ì—¬ í˜„ì¬ ëª¨ë“  íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ëŠ” ê·œì¹™ì„ ëª¨ë‘ ê±°ë¶€í•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.

Although the inbound rule allows HTTP traffic, the outbound deny rule blocks return traffic.
ì¸ë°”ìš´ë“œ ê·œì¹™ì´ HTTP íŠ¸ë˜í”½ì„ í—ˆìš©í•´ë„, ì•„ì›ƒë°”ìš´ë“œ ê±°ë¶€ ê·œì¹™ ë•Œë¬¸ì— ë°˜í™˜ íŠ¸ë˜í”½ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤.

Refreshing the Bastion host's web page now results in infinite loading due to the blocked return traffic.
ë°˜í™˜ íŠ¸ë˜í”½ì´ ì°¨ë‹¨ë˜ë¯€ë¡œ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ ì›¹ í˜ì´ì§€ ìƒˆë¡œ ê³ ì¹¨ ì‹œ ë¬´í•œ ë¡œë”©ì´ ë°œìƒí•©ë‹ˆë‹¤.

This confirms that NACLs are stateless and require explicit rules for both inbound and outbound traffic.
ì´ëŠ” NACLì´ ìƒíƒœ ë¹„ì €ì¥ì´ë©°, ì¸ë°”ìš´ë“œì™€ ì•„ì›ƒë°”ìš´ë“œ ëª¨ë‘ì— ëª…ì‹œì  ê·œì¹™ì´ í•„ìš”í•¨ì„ í™•ì¸ì‹œì¼œì¤ë‹ˆë‹¤.

---

## Relationship Between Security Groups and Network ACLs

## ë³´ì•ˆ ê·¸ë£¹ê³¼ ë„¤íŠ¸ì›Œí¬ ACL ê´€ê³„

It is important to note that security groups and network ACLs work together.
ë³´ì•ˆ ê·¸ë£¹ê³¼ NACLì€ í•¨ê»˜ ì‘ë™í•œë‹¤ëŠ” ì ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

Even if the security group allows traffic, the NACL can block it.
ë³´ì•ˆ ê·¸ë£¹ì´ íŠ¸ë˜í”½ì„ í—ˆìš©í•´ë„ NACLì´ ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Therefore, both must be configured correctly to avoid network issues.
ë”°ë¼ì„œ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¥¼ ë°©ì§€í•˜ë ¤ë©´ ë‘ ê°€ì§€ë¥¼ ëª¨ë‘ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

---

## Security Group Stateful Behavior

## ë³´ì•ˆ ê·¸ë£¹ ìƒíƒœ ì €ì¥ íŠ¹ì„±

Revert the NACL outbound rule to allow all traffic.
NACL ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì„ ëª¨ë“  íŠ¸ë˜í”½ í—ˆìš©ìœ¼ë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.

Now, modify the security group's outbound rules by removing all outbound permissions.
ì´ì œ ë³´ì•ˆ ê·¸ë£¹ ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì—ì„œ ëª¨ë“  ì•„ì›ƒë°”ìš´ë“œ ê¶Œí•œì„ ì œê±°í•©ë‹ˆë‹¤.

Despite this, refreshing the Bastion host's web page still works because security groups are stateful and allow return traffic automatically.
ê·¸ëŸ¼ì—ë„ ë°°ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ ì›¹ í˜ì´ì§€ ìƒˆë¡œ ê³ ì¹¨ì´ ì‘ë™í•˜ëŠ” ì´ìœ ëŠ”, ë³´ì•ˆ ê·¸ë£¹ì´ ìƒíƒœ ì €ì¥ì´ë¯€ë¡œ ë°˜í™˜ íŠ¸ë˜í”½ì„ ìë™ìœ¼ë¡œ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

However, if the EC2 instance initiates a connection to an external service, such as Google, it will be denied due to the lack of outbound rules.
í•˜ì§€ë§Œ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ Googleê³¼ ê°™ì€ ì™¸ë¶€ ì„œë¹„ìŠ¤ì— ì—°ê²°ì„ ì‹œë„í•˜ë©´, ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì´ ì—†ìœ¼ë¯€ë¡œ ì—°ê²°ì´ ê±°ë¶€ë©ë‹ˆë‹¤.

If outbound rules were added to allow such connections, return traffic would be permitted because of the stateful nature of security groups.
ì´ëŸ¬í•œ ì—°ê²°ì„ í—ˆìš©í•˜ëŠ” ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ì„ ì¶”ê°€í•˜ë©´, ë³´ì•ˆ ê·¸ë£¹ì˜ ìƒíƒœ ì €ì¥ íŠ¹ì„± ë•ë¶„ì— ë°˜í™˜ íŠ¸ë˜í”½ì€ í—ˆìš©ë©ë‹ˆë‹¤.

---

## Conclusion

## ê²°ë¡ 

To restore full functionality, ensure HTTP is allowed from anywhere in both the security group and NACL outbound rules.
ì™„ì „í•œ ê¸°ëŠ¥ ë³µì›ì„ ìœ„í•´, ë³´ì•ˆ ê·¸ë£¹ê³¼ NACL ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ ëª¨ë‘ì—ì„œ HTTPë¥¼ ì–´ë””ì„œë‚˜ í—ˆìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.

Understanding the differences between EC2 security groups and network ACLs is crucial for effective network security management.
EC2 ë³´ì•ˆ ê·¸ë£¹ê³¼ NACLì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ íš¨ê³¼ì ì¸ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ê´€ë¦¬ì— í•„ìˆ˜ì ì…ë‹ˆë‹¤.

---

## Key Takeaways

## í•µì‹¬ ìš”ì•½

* Network ACLs (NACLs) are stateless firewalls associated with subnets, controlling inbound and outbound traffic.

* NACLì€ ì„œë¸Œë„·ê³¼ ì—°ê²°ëœ ìƒíƒœ ë¹„ì €ì¥ ë°©í™”ë²½ìœ¼ë¡œ ì¸ë°”ìš´ë“œì™€ ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì„ ì œì–´í•©ë‹ˆë‹¤.

* Default NACLs allow all inbound and outbound traffic and are associated with all subnets by default.

* ê¸°ë³¸ NACLì€ ëª¨ë“  ì¸ë°”ìš´ë“œ ë° ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ë©°, ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ì„œë¸Œë„·ê³¼ ì—°ê²°ë©ë‹ˆë‹¤.

* Rule precedence in NACLs is determined


by rule numbers; lower numbers have higher priority.

* NACLì˜ ê·œì¹™ ìš°ì„ ìˆœìœ„ëŠ” ê·œì¹™ ë²ˆí˜¸ë¡œ ê²°ì •ë˜ë©°, ë‚®ì€ ë²ˆí˜¸ê°€ ë” ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ìŠµë‹ˆë‹¤.

* Security groups are stateful, allowing return traffic automatically, whereas NACLs are stateless and require explicit rules for return traffic.

* ë³´ì•ˆ ê·¸ë£¹ì€ ìƒíƒœ ì €ì¥ì´ë¯€ë¡œ ë°˜í™˜ íŠ¸ë˜í”½ì„ ìë™ìœ¼ë¡œ í—ˆìš©í•˜ì§€ë§Œ, NACLì€ ìƒíƒœ ë¹„ì €ì¥ì´ë¯€ë¡œ ë°˜í™˜ íŠ¸ë˜í”½ì— ëŒ€í•œ ëª…ì‹œì  ê·œì¹™ì´ í•„ìš”í•©ë‹ˆë‹¤.

```
